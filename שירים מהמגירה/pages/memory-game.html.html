<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <!-- ... (CSS styles remain the same) ... -->
    <script>
        function generatePoem() {
            const input = document.getElementById('nameInput').value;
            const resultDiv = document.getElementById('result');
            const shareButton = document.getElementById('shareButton');
            let poem = '';
            let name = '';
            let role = '';

            const roles = ['מורה', 'גננת', 'ביתי', 'אשתי'];

            for (let r of roles) {
                if (input.includes(r)) {
                    role = r;
                    name = input.replace(r, '').trim();
                    break;
                }
            }

            if (!role) {
                const words = input.split(' ');
                const lastWord = words.pop();
                if (roles.includes(lastWord)) {
                    role = lastWord;
                    name = words.join(' ').trim();
                } else {
                    resultDiv.innerHTML = 'לא נמצא תפקיד מתאים. אנא נסה שוב עם אחד מהתפקידים: מורה, גננת, ביתי, או אשתי.';
                    shareButton.style.display = 'none';
                    return;
                }
            }

            name = name.replace(/^[הל]/, '').trim();

            const poems = {
                'גננת': [
                    `לגננת ${name},
פֶּרַח בְּגַן הַיְּלָדִים,
מְטַפַּחַת נְשָׁמוֹת רַכּוֹת,
בְּמַבָּט מָלֵא אַהֲבָה,
זוֹרַעַת זְרָעִים שֶׁל תִּקְוָה,
יְבָרְכֵךְ ה' בְּשֶׁפַע אוֹר,
תִּקְצְרִי פֵּרוֹת בְּאַהֲבָה רַכָּה.`,
                    `בּוֹנָה יְסוֹדוֹת לְדוֹר עָתִיד בִּקְדֻשָּׁה טְהוֹרָה.
${name}, בְּסַבְלָנוּת וּבְחוֹכְמָה, כְּפֶלֶא נִסְתָּר,
מַצְמִיחָה פְּרָחִים קְטַנִּים לְגַן מְפֹאָר.
תְּבוֹרַךְ בְּאֹשֶׁר, שִׂמְחָה וְהַצְלָחָה,
וּפְרִי עֲמָלֵךְ יָנוּב, שָׁנָה אַחַר שָׁנָה.`
                ],
                'ביתי': [
                    `לביתי ${name},
כּוֹכָב זוֹהֵר בַּשָּׁמַיִם,
מִתְמַסֶּרֶת לַלִּמּוּדִים,
בְּהִשְׁתַּדְּלוּת וּבְחֲרִיצוּת,
צוֹלַחַת כָּל קוֹשִׁי בְּדַרְכֵּךְ,
מְגַלָּה עוֹלָמוֹת חֲדָשִׁים,
בְּכָל שִׁעוּר וְשִׁעוּר.`,
                    `יַלְדָּה מְיֻחֶדֶת, אֵין כָּמוֹתָהּ בָּעוֹלָם,
${name}, שׁוֹאֶפֶת לִדְעַת וּלְהַצְלִיחַ, לֹא נָחָה לְעוֹלָם.
בְּעָמְלָהּ הַרַב צוֹבֶרֶת יֶדַע וּמָעוֹף,
פּוֹתַחַת צוֹהַר לְעוֹלָם מופלא, בְּלִי הֶרֶף וְלֹא לֵאוּת.
תִּתְבָּרֵךְ מֵאֵת ה' בְּכָל טוּב וְעֹשֶׁר,
וְאֶל כָּל אֲשֶׁר תִּפְנִי תַּצְלִיחִי, וְלֹא תָחוּשִׁי מַחְסוֹר.`
                ],
                'מורה': [
                    `למורה ${name},
אוֹר יָקָר בְּחַיֵּינוּ,
מְאִירָה דְּרָכִים לַתַּלְמִידִים,
בְּסַבְלָנוּת וְאַהֲבָה רַבָּה,
מוֹבִילָה אֶל עֵבֶר הַחוֹף,
יְהִי רָצוֹן שֶׁתִּרְאִי פְּרִי עֲמָלֵךְ,
בְּרָכָה וְהַצְלָחָה בְּדַרְכֵּךְ.`,
                    `מוֹרָה מֻפְלָאָה,
בְּכָל יוֹם מַעֲנִיקָה, יֶדַע וְהַשְׁרָאָה.
מַדְרִיכָה בִּנְתִיבֵי הַתּוֹרָה וְהַמּוּסָר,
${name}, מְלַמֶּדֶת לְהַבְחִין בֵּין עִקָּר וְטָפֵל.
בְּרוּכָה תְּהִי תָּמִיד, בְּכָל אֲשֶׁר תִּבְחֲרִי,
וּבְאוֹר הַתּוֹרָה תָּמִיד תָּאִירִי.`
                ],
                'אשתי': [
                    `לאשתי ${name},
יְקָרָתִי מִכֹּל יָקָר,
בּוֹחֶרֶת בִּי בְּכָל יוֹם מֵחָדָשׁ,
עֲדִינַת נֶפֶשׁ, לֵב זָהָב,
מְגַדֶּלֶת יְלָדֵינוּ בְּאַהֲבָה,
יִתֵּן ה' בְּרָכָתוֹ עָלַיִךְ,
חַסְדּוֹ יַעֲטֹף אוֹתָךְ תָּמִיד.`,
                    `אֲהוּבָתִי, שׁוֹתֶפֶת חַיִּים וְאֵם יְלָדַי,
${name}, אֵשֶׁת חַיִל עֲטֶרֶת בַּעְלָהּ, כָּל פָּז לֹא יִסֻלֶּה בָּהּ.
בְּלִבֵּךְ הָרַחוּם תָּמִיד מוֹצֵא מָנוֹחַ,
וּבְחוֹכְמָתֵךְ הָרַבָּה מוֹבִילָה אֶת מִשְׁפַּחְתֵּנוּ אֶל הַבְּרָכָה וְהַנֶּחָמָה.
יְהִי רָצוֹן מִלִּפְנֵי אָבִינוּ שֶׁבַּשָּׁמַיִם,
שֶׁתְּהִי תָמִיד מְאֻשֶּׁרֶת, מוּאֶרֶת וּמְבֹרֶכֶת בְּאַהֲבָה, עַד בִּיאַת הַגּוֹאֵל.`
                ]
            };

            const poemsForRole = poems[role];
            const randomIndex = Math.floor(Math.random() * poemsForRole.length);
            poem = poemsForRole[randomIndex];

            const formattedPoem = poem.split('\n').map(line => `<span class="poem-line">${line}</span>`).join('');

            resultDiv.innerHTML = `
                <div class="poem-container">
                    <div class="poem-decoration"></div>
                    <div class="poem-text">
                        ${formattedPoem}
                    </div>
                </div>
            `;
            shareButton.style.display = 'inline-block';
        }

        function sharePrint() {
            alert('פונקציונליות השיתוף וההדפסה אינה זמינה כרגע. זוהי הדגמה בלבד.');
        }
    </script>
</head>
<body>
    <!-- ... (HTML structure remains the same) ... -->
</body>
</html>
